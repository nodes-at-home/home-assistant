#
# lovelace configuration - one big file for all
#

title: !env_var HA_TITLE
views:

  - title: System
    path: system
    panel: false
    badges:
      - type: custom:mushroom-template-badge
        entity: group.nodestates_core
        content: Geräte
        icon: "{{ 'mdi:checkbox-marked-circle' if is_state ( entity, 'on' ) else 'mdi:alert-circle-outline' }}"
        color: "{{ 'limegreen' if is_state ( entity, 'on' ) else 'red' }}"
        tap_action:
            action: more-info
      - type: custom:mushroom-template-badge
        entity: group.batteries_bsh
        content: Bosch
        icon: "{{ 'mdi:battery-check' if is_state ( entity, 'off' ) else 'mdi:battery-alert' }}"
        color: "{{ 'limegreen' if is_state ( entity, 'off' ) else 'red' }}"
        tap_action:
            action: more-info
      - type: custom:mushroom-template-badge
        entity: group.batteries_nuki
        content: Nuki
        icon: "{{ 'mdi:battery-check' if is_state ( entity, 'off' ) else 'mdi:battery-alert' }}"
        color: "{{ 'limegreen' if is_state ( entity, 'off' ) else 'red' }}"
        tap_action:
            action: more-info
      - type: custom:mushroom-template-badge
        entity: group.batteries_gardena
        content: Gardena
        icon: "{{ 'mdi:battery-check' if is_state ( entity, 'off' ) else 'mdi:battery-alert' }}"
        color: "{{ 'limegreen' if is_state ( entity, 'off' ) else 'red' }}"
        tap_action:
            action: more-info
      - type: custom:mushroom-template-badge
        entity: group.batteries_ikea
        content: IKEA
        icon: "{{ 'mdi:battery-check' if is_state ( entity, 'off' ) else 'mdi:battery-alert' }}"
        color: "{{ 'limegreen' if is_state ( entity, 'off' ) else 'red' }}"
        tap_action:
            action: more-info
      - type: entity
        entity: sensor.log_db_file_size
        show_name: true
        icon: mdi:database
      - type: entity
        entity: sensor.cpu_temp
        show_name: true
        icon: mdi:memory
    cards:
      - type: entities
        title: Stage
        show_header_toggle: false
        entities:
            - binary_sensor.prod_mode
            - binary_sensor.dev_mode
      - type: entities
        title: RPi Server
        show_header_toggle: false
        entities:
            - sensor.system_monitor_prozessornutzung
            - sensor.system_monitor_belegter_arbeitsspeicher
            - sensor.system_monitor_arbeitsspeicher_auslastung
            - sensor.system_monitor_belegter_massenspeicher
            - sensor.system_monitor_massenspeicher_auslastung
            - sensor.system_monitor_letzter_systemstart
      - type: entities
        title: Home Assistant
        show_header_toggle: false
        entities:
            - sensor.current_version
            - sensor.home_assistant_website
            - binary_sensor.home_assistant_website_update_available
            - sensor.docker_hub
            - binary_sensor.docker_hub_update_available
      # - type: entities
      #   title: DSL
      #   show_header_toggle: false
      #   entities:
      #       - sensor.speedtest_ping
      #       - sensor.speedtest_download
      #       - sensor.speedtest_upload
      - type: entities
        title: Fritz!Box
        show_header_toggle: false
        entities:
            - binary_sensor.fritz_box_7590_verbindung
            - binary_sensor.fritz_box_7590_verbinden
            - sensor.fritz_box_7590_externe_ip
            - sensor.fritz_box_7590_letzter_neustart
            - sensor.fritz_box_7590_verbindungsverfugbarkeit
            - switch.fritz_box_7590_wi_fi_mauzigast
            - switch.fritz_box_7590_wi_fi_pokemonnetwlan
            - switch.fritz_box_7590_wi_fi_pokemonnetwlan5
      - type: entities
        title: USV
        show_header_toggle: false
        entities:
            - sensor.ups_status
            - sensor.ups_batterie_ladung
            - sensor.ups_last
            - sensor.ups_ausgangsspannung
            - sensor.ups_batterielaufzeit
            # - sensor.ups_statusdaten

  - title: Geräte
    path: nodes
    panel: false
    badges:
      - type: custom:mushroom-template-badge
        entity: group.nodestates_core
        content: Geräte
        icon: "{{ 'mdi:checkbox-marked-circle' if is_state ( entity, 'on' ) else 'mdi:alert-circle-outline' }}"
        color: "{{ 'green' if is_state ( entity, 'on' ) else 'red' }}"
        tap_action:
            action: more-info
      - type: custom:mushroom-template-badge
        entity: group.nodestates_summer
        content: Sommer
        icon: "{{ 'mdi:checkbox-marked-circle' if is_state ( entity, 'on' ) else 'mdi:alert-circle-outline' }}"
        color: "{{ 'green' if is_state ( entity, 'on' ) else 'red' }}"
        tap_action:
            action: more-info
      - type: custom:mushroom-template-badge
        entity: group.nodestates_xmas
        content: Xmas
        icon: "{{ 'mdi:checkbox-marked-circle' if is_state ( entity, 'on' ) else 'mdi:alert-circle-outline' }}"
        color: "{{ 'green' if is_state ( entity, 'on' ) else 'red' }}"
        tap_action:
            action: more-info
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_dht22_lounge
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_dht22_terrace
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_dht22_roof
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_relay_garage
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_sonoff_bedroom
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/sonoff_s20.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_ttp223_bedroom
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_ws2812_office
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
      - type: vertical-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_led_kitchen
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/sonoff_led.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_led_kitchen2
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/sonoff_led.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_gesture_kitchen
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          #- type: custom:mushroom-template-card
          #  entity: binary_sensor.nodestate_sonoff_k8200
          #  tap_action:
          #    action: more-info
          #  multiline_secondary: true
          #  primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
          #  secondary: |
          #    {% set info_entity_base = 'sensor.' + entity[24:] %}
          #    boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
          #    ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
          #    {#{ states ( entity | replace ( '@', '_' ) ) }#}
          #  picture: /local/images/sonoff_s20.jpg
          #  badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
          #  badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_sonoff_gallery1
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/sonoff_s20.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_sonoff_corridor
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/sonoff_s20.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_electricity_utilityroom
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_pixel_kitchen
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_ds18b20_groundfloor
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_ds18b20_firstfloor
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_gas_utilityroom
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_led_corridor
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/sonoff_led.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"

      - type: vertical-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_rain_garden
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_dht11_utilityroom
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          #- type: custom:mushroom-template-card
          #  entity: binary_sensor.nodestate_sonoff_pool
          #  tap_action:
          #    action: more-info
          #  multiline_secondary: true
          #  primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
          #  secondary: |
          #    {% set info_entity_base = 'sensor.' + entity[24:] %}
          #    boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
          #    ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
          #    {#{ states ( entity | replace ( '@', '_' ) ) }#}
          #  picture: /local/images/wemos_mini.jpg
          #  badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
          #  badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_ds18b20_pool
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_ds18b20_brewery
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_spindle_fermenter
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_xmastree_dining
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_relay_garden
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_relay_garden2
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          # - type: custom:mushroom-template-card
          #   entity: binary_sensor.nodestate_ws2812_terrace1
          #   tap_action:
          #     action: more-info
          #   multiline_secondary: true
          #   primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
          #   secondary: |
          #     {% set info_entity_base = 'sensor.' + entity[24:] %}
          #     boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
          #     ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
          #     {#{ states ( entity | replace ( '@', '_' ) ) }#}
          #   picture: /local/images/sonoff_led.jpg
          #   badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
          #   badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          # - type: custom:mushroom-template-card
          #   entity: binary_sensor.nodestate_ws2812_terrace2
          #   tap_action:
          #     action: more-info
          #   multiline_secondary: true
          #   primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
          #   secondary: |
          #     {% set info_entity_base = 'sensor.' + entity[24:] %}
          #     boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
          #     ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
          #     {#{ states ( entity | replace ( '@', '_' ) ) }#}
          #   picture: /local/images/sonoff_led.jpg
          #   badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
          #   badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_ws2812_xmasstar
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/sonoff_led.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_relay_hydrotower
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_ws2812_x1c
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] | replace ( '_', '@' ) }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/sonoff_led.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"

      - type: vertical-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_pitouch_corridor
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: pitouch
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_tasmota
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_ems_esp
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: ems-esp
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"
          - type: custom:mushroom-template-card
            entity: binary_sensor.nodestate_watermeter
            tap_action:
              action: more-info
            multiline_secondary: true
            primary: "{{ entity[24:] }}"
            secondary: |
              {% set info_entity_base = 'sensor.' + entity[24:] %}
              boot: {{ states ( info_entity_base + '_lastboot' ) }}   version: {{ states ( info_entity_base + '_version' ) }}
              ping: {{ states ( info_entity_base + '_lastvoltage' ) }}    voltage: {{ states ( info_entity_base + '_voltage', with_unit = true ) }}
              {#{ states ( entity | replace ( '@', '_' ) ) }#}
            picture: /local/images/wemos_mini.jpg
            badge_icon: "{{ 'mdi:check' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'mdi:alert-circle-outline' }}"
            badge_color: "{{ 'green' if is_state ( entity | replace ( '@', '_' ), 'on' ) else 'red' }}"

  - title: Bosch Smart Home
    path: bsh
    panel: false
    badges:
      - type: custom:mushroom-template-badge
        entity: group.batteries_bsh
        content: Batterien
        icon: "{{ 'mdi:battery-check' if is_state ( entity, 'off' ) else 'mdi:battery-alert' }}"
        color: "{{ 'limegreen' if is_state ( entity, 'off' ) else 'red' }}"
        tap_action:
            action: more-info
    cards:
      - type: entities
        title: Rauchmelder Erdgeschoss
        show_header_toggle: false
        entities:
            - binary_sensor.rauchmelder_flur
            - binary_sensor.rauchmelder_flur_battery
            - type: divider
            - binary_sensor.rauchmelder_esszimmer
            - binary_sensor.rauchmelder_esszimmer_battery
            - type: divider
            - binary_sensor.rauchmelder_wohnzimmer
            - binary_sensor.rauchmelder_wohnzimmer_battery
            - type: divider
            - binary_sensor.rauchmelder_hauswirtsch
            - binary_sensor.rauchmelder_hauswirtsch_battery
            - type: divider
            - binary_sensor.rauchmelder_garage
            - binary_sensor.rauchmelder_garage_battery
      - type: entities
        title: Rauchmelder Obergeschoss
        show_header_toggle: false
        entities:
            - binary_sensor.rauchmelder_buro
            - binary_sensor.rauchmelder_buro_battery
            - type: divider
            - binary_sensor.rauchmelder_schlafzimmer
            - binary_sensor.rauchmelder_schlafzimmer_battery
            - type: divider
            - binary_sensor.rauchmelder_kinderzimmer
            - binary_sensor.rauchmelder_kinderzimmer_battery
            - type: divider
            - binary_sensor.rauchmelder_galerie
            - binary_sensor.rauchmelder_galerie_battery
            - type: divider
            - binary_sensor.rauchmelder_dachboden
            - binary_sensor.rauchmelder_dachboden_battery
      - type: entities
        title: Türkontakte
        show_header_toggle: false
        entities:
            - binary_sensor.eingangstur
            - binary_sensor.eingangstur_battery
            - type: divider
            - binary_sensor.nebentur
            - binary_sensor.nebentur_battery
            - type: divider
            - binary_sensor.dachboden
            - binary_sensor.dachboden_battery
            - type: divider
            - binary_sensor.garagentur
            - binary_sensor.garagentur_battery
            - type: divider
            - binary_sensor.garagentor
            - binary_sensor.garagentor_battery
            - type: divider
            - binary_sensor.terassentur_kuche
            - binary_sensor.terassentur_kuche_battery
            - type: divider
            - binary_sensor.terassentur_esszimmer
            - binary_sensor.terassentur_esszimmer_battery
            - type: divider
            - binary_sensor.terassentur_wohnzimmer
            - binary_sensor.terassentur_wohnzimmer_battery
      - type: entities
        title: Fensterkontakte Erdgeschoss
        show_header_toggle: false
        entities:
            - binary_sensor.fenster_flur
            - binary_sensor.fenster_flur_battery
            - type: divider
            - binary_sensor.fenster_dusche
            - binary_sensor.fenster_dusche_battery
            - type: divider
            - binary_sensor.fenster_wohnzimmer_1
            - binary_sensor.fenster_wohnzimmer_1_battery
            - binary_sensor.fenster_wohnzimmer_2
            - binary_sensor.fenster_wohnzimmer_2_battery
            - binary_sensor.fenster_wohnzimmer_3
            - binary_sensor.fenster_wohnzimmer_3_battery
            - binary_sensor.fenster_wohnzimmer_4
            - binary_sensor.fenster_wohnzimmer_4_battery
            - binary_sensor.fenster_wohnzimmer_5
            - binary_sensor.fenster_wohnzimmer_5_battery
            - binary_sensor.fenster_wohnzimmer_6
            - binary_sensor.fenster_wohnzimmer_6_battery
      - type: entities
        title: Fensterkontakte Obergeschoss
        show_header_toggle: false
        entities:
            - binary_sensor.dachfenster_galerie
            - binary_sensor.dachfenster_galerie_battery
            - type: divider
            - binary_sensor.fenster_arbeitszimmer
            - binary_sensor.fenster_arbeitszimmer_battery
            - binary_sensor.dachfenster_arbeitszimmer
            - binary_sensor.dachfenster_arbeitszimmer_battery
            - type: divider
            - binary_sensor.fenster_kinderzimmer
            - binary_sensor.fenster_kinderzimmer_battery
            - binary_sensor.dachfenster_kinderzimmer
            - binary_sensor.dachfenster_kinderzimmer_battery
            - type: divider
            - binary_sensor.fenster_schlafzimmer
            - binary_sensor.fenster_schlafzimmer_battery
            - binary_sensor.dachfenster_schlafzimmer
            - binary_sensor.dachfenster_schlafzimmer_battery
            - type: divider
            - binary_sensor.fenster_bad
            - binary_sensor.fenster_bad_battery
            - binary_sensor.dachfenster_bad
            - binary_sensor.dachfenster_bad_battery
            - type: divider
            - binary_sensor.fenster_dachboden
            - binary_sensor.fenster_dachboden_battery
      - type: entities
        title: Bewegungsmelder
        show_header_toggle: false
        entities:
            - binary_sensor.bewegungsmelder1
            - binary_sensor.bewegungsmelder1_battery
      - type: entities
        title: Dienste
        show_header_toggle: false
        entities:
            - entity: binary_sensor.64_da_a0_03_b3_1e_smokedetectionsystem
              name: Smoke Detection System
            - alarm_control_panel.intrusion_detection_system
      - type: entities
        title: Zwischenstecker
        show_header_toggle: false
        entities:
            - switch.wasserpumpe
            - sensor.wasserpumpe_energy
            - sensor.wasserpumpe_power
            - type: divider
            # refrigerator
            - switch.kuhlschrank
            - sensor.kuhlschrank_energy
            - sensor.kuhlschrank_power
            - type: divider
            # washing machine
            - switch.waschmaschine
            - sensor.waschmaschine_energy
            - sensor.waschmaschine_power
            - type: divider
            # dishwasher
            - switch.geschirrspuler
            - sensor.geschirrspuler_energy
            - sensor.geschirrspuler_power
            - type: divider
            # accu loader station
            - switch.bosch_ladestation
            - sensor.bosch_ladestation_energy
            - sensor.bosch_ladestation_power
            - type: divider
            - switch.rechenzentrum
            - sensor.rechenzentrum_energy
            - sensor.rechenzentrum_power
            - type: divider
            - switch.nodesathome1
            - sensor.nodesathome1_energy
            - sensor.nodesathome1_power
            - type: divider
            - switch.nodesathome2
            - sensor.nodesathome2_energy
            - sensor.nodesathome2_power
            - type: divider
            - switch.poolpumpe
            - sensor.poolpumpe_energy
            - sensor.poolpumpe_power
            - type: divider
            - switch.klimaanlage_arbeitszimmer
            - sensor.klimaanlage_arbeitszimmer_energy
            - sensor.klimaanlage_arbeitszimmer_power
            - type: divider
            - switch.klimaanlage_kinderzimmer
            - sensor.klimaanlage_kinderzimmer_energy
            - sensor.klimaanlage_kinderzimmer_power
            - type: divider
            - switch.klimaanlage_schlafzimmer
            - sensor.klimaanlage_schlafzimmer_energy
            - sensor.klimaanlage_schlafzimmer_power
            - type: divider
            - switch.schreibtisch_arbeitszimmer
            - sensor.schreibtisch_arbeitszimmer_energy
            - sensor.schreibtisch_arbeitszimmer_power
            - type: divider
            - switch.schreibtisch_wohnzimmer
            - sensor.schreibtisch_wohnzimmer_energy
            - sensor.schreibtisch_wohnzimmer_power
            - type: divider
            - switch.fernseher
            - sensor.fernseher_energy
            - sensor.fernseher_power
      - type: entities
        title: Wassermelder
        show_header_toggle: false
        entities:
            - binary_sensor.wassermelder
            - binary_sensor.wassermelder_battery
      - type: entities
        title: Heizkörperthermostate
        show_header_toggle: false
        entities:
            - binary_sensor.heizkorper_bad_battery
            - switch.heizkorper_bad_childlock
            - number.heizkorper_bad_offset
            - sensor.heizkorper_bad_temperature
            - sensor.heizkorper_bad_valvetappet
            - type: divider
            - binary_sensor.heizkorper_dusche_battery
            - switch.heizkorper_dusche_childlock
            - number.heizkorper_dusche_offset
            - sensor.heizkorper_dusche_temperature
            - sensor.heizkorper_dusche_valvetappet
      - type: entities
        title: Raumklima
        show_header_toggle: false
        entities:
            - climate.room_climate_kuche
            - climate.room_climate_esszimmer
            - climate.room_climate_wohnzimmer
            - climate.room_climate_flur
            - climate.room_climate_dusche
            - climate.room_climate_hauswirtschaftsraum
            - climate.room_climate_galerie
            - climate.room_climate_schlafzimmer
            - climate.room_climate_kinderzimmer
            - climate.room_climate_arbeitszimmer
            - climate.room_climate_bad
      - type: entities
        title: Wandthermostate Erdgeschoss
        show_header_toggle: false
        entities:
            - switch.thermostat_kuche_childlock
            - number.thermostat_kuche_offset
            - sensor.thermostat_kuche_temperature
            - sensor.thermostat_kuche_humidity
            - type: divider
            - switch.thermostat_esszimmer_childlock
            - number.thermostat_esszimmer_offset
            - sensor.thermostat_esszimmer_temperature
            - sensor.thermostat_esszimmer_humidity
            - type: divider
            - switch.thermostat_wohnzimmer_childlock
            - number.thermostat_wohnzimmer_offset
            - sensor.thermostat_wohnzimmer_temperature
            - sensor.thermostat_wohnzimmer_humidity
            - type: divider
            - switch.thermostat_flur_childlock
            - number.thermostat_flur_offset
            - sensor.thermostat_flur_temperature
            - sensor.thermostat_flur_humidity
            - type: divider
            - switch.thermostat_dusche_childlock
            - number.thermostat_dusche_offset
            - sensor.thermostat_dusche_temperature
            - sensor.thermostat_dusche_humidity
            - type: divider
            - switch.thermostat_hauswirtschaft_childlock
            - number.thermostat_hauswirtschaft_offset
            - sensor.thermostat_hauswirtschaft_temperature
            - sensor.thermostat_hauswirtschaft_humidity
      - type: entities
        title: Wandthermostate Obergeschoss
        show_header_toggle: false
        entities:
            - switch.thermostat_galerie_childlock
            - number.thermostat_galerie_offset
            - sensor.thermostat_galerie_temperature
            - sensor.thermostat_galerie_humidity
            - type: divider
            - switch.thermostat_schlafzimmer_childlock
            - number.thermostat_schlafzimmer_offset
            - sensor.thermostat_schlafzimmer_temperature
            - sensor.thermostat_schlafzimmer_humidity
            - type: divider
            - switch.thermostat_kinderzimmer_childlock
            - number.thermostat_kinderzimmer_offset
            - sensor.thermostat_kinderzimmer_temperature
            - sensor.thermostat_kinderzimmer_humidity
            - type: divider
            - switch.thermostat_arbeitszimmer_childlock
            - number.thermostat_arbeitszimmer_offset
            - sensor.thermostat_arbeitszimmer_temperature
            - sensor.thermostat_arbeitszimmer_humidity
            - type: divider
            - switch.thermostat_bad_childlock
            - number.thermostat_bad_offset
            - sensor.thermostat_bad_temperature
            - sensor.thermostat_bad_humidity

  - title: Shelly 1
    path: shelly1
    panel: false
    cards:
      - type: entities
        title: Erdgeschoss
        show_header_toggle: false
        entities:
          - light.shelly_flur
          - entity: sensor.shelly_flur_energy
          - entity: sensor.shelly_flur_power
          - entity: update.shelly_flur_firmware
          - entity: button.shelly_flur_reboot
          - type: divider
          - light.shelly_korridor
          - entity: sensor.shelly_korridor_energy
          - entity: sensor.shelly_korridor_power
          - entity: update.shelly_korridor_firmware
          - entity: button.shelly_korridor_reboot
          - type: divider
          - light.shelly_esszimmer1
          - entity: sensor.shelly_esszimmer1_energy
          - entity: sensor.shelly_esszimmer1_power
          - entity: update.shelly_esszimmer1_firmware
          - entity: button.shelly_esszimmer1_reboot
          - type: divider
          - light.shelly_esszimmer2_switch_0
          - entity: sensor.shelly_esszimmer2_switch_0_energy
          - entity: sensor.shelly_esszimmer2_switch_0_power
          - light.shelly_esszimmer2_switch_1
          - entity: sensor.shelly_esszimmer2_switch_1_energy
          - entity: sensor.shelly_esszimmer2_switch_1_power
          - entity: update.shelly_esszimmer2_firmware
          - entity: button.shelly_esszimmer2_reboot
          - type: divider
          - light.shelly_wohnzimmer_switch_0
          - entity: sensor.shelly_wohnzimmer_switch_0_energy
          - entity: sensor.shelly_wohnzimmer_switch_0_power
          - light.shelly_wohnzimmer_switch_1
          - entity: sensor.shelly_wohnzimmer_switch_1_energy
          - entity: sensor.shelly_wohnzimmer_switch_1_power
          - entity: update.shelly_wohnzimmer_firmware
          - entity: button.shelly_wohnzimmer_reboot
          - type: divider
          - switch.shelly_dusche
          - entity: sensor.shelly_dusche_energy
          - entity: sensor.shelly_dusche_power
          - entity: update.shelly_dusche_firmware
          - entity: button.shelly_dusche_reboot
      - type: entities
        title: Obergeschoss
        show_header_toggle: false
        entities:
          - light.shelly_treppe
          - entity: sensor.shelly_treppe_energy
          - entity: sensor.shelly_treppe_power
          - entity: update.shelly_treppe_firmware
          - entity: button.shelly_treppe_reboot
          - type: divider
          - light.shelly_galerie
          - entity: sensor.shelly_galerie_energy
          - entity: sensor.shelly_galerie_power
          - entity: update.shelly_galerie_firmware
          - entity: button.shelly_galerie_reboot
          - type: divider
          - light.shelly_arbeitszimmer
          - entity: sensor.shelly_arbeitszimmer_energy
          - entity: sensor.shelly_arbeitszimmer_power
          - entity: update.shelly_arbeitszimmer_firmware
          - entity: button.shelly_arbeitszimmer_reboot
          - type: divider
          - light.shelly_kinderzimmer
          - entity: sensor.shelly_kinderzimmer_energy
          - entity: sensor.shelly_kinderzimmer_power
          - entity: update.shelly_kinderzimmer_firmware
          - entity: button.shelly_kinderzimmer_reboot
          - type: divider
          - light.shelly_schlafzimmer
          - entity: sensor.shelly_schlafzimmer_energy
          - entity: sensor.shelly_schlafzimmer_power
          - entity: update.shelly_schlafzimmer_firmware
          - entity: button.shelly_schlafzimmer_reboot
          - type: divider
          - switch.shelly_bad
          - entity: sensor.shelly_bad_energy
          - entity: sensor.shelly_bad_power
          - entity: update.shelly_bad_firmware
          - entity: button.shelly_bad_reboot
      - type: entities
        title: Dachgeschoss
        show_header_toggle: false
        entities:
          - light.shelly_dachboden
          - entity: sensor.shelly_dachboden_energy
          - entity: sensor.shelly_dachboden_power
          - entity: update.shelly_dachboden_firmware
          - entity: button.shelly_dachboden_reboot
      - type: entities
        title: Garage
        show_header_toggle: false
        entities:
          - light.shelly_garage1
          - entity: sensor.shelly_garage1_energy
          - entity: sensor.shelly_garage1_power
          - entity: update.shelly_garage1_firmware
          - entity: button.shelly_garage1_reboot
          - type: divider
          - light.shelly_garage2
          - entity: sensor.shelly_garage2_energy
          - entity: sensor.shelly_garage2_power
          - entity: update.shelly_garage2_firmware
          - entity: button.shelly_garage2_reboot
      - type: entities
        title: Außenlichter
        show_header_toggle: false
        entities:
          - light.shelly_terasse
          - entity: sensor.shelly_terasse_energy
          - entity: sensor.shelly_terasse_power
          - entity: update.shelly_terasse_firmware
          - entity: button.shelly_terasse_reboot
          - type: divider
          - light.shelly_hinterhof
          - entity: sensor.shelly_hinterhof_energy
          - entity: sensor.shelly_hinterhof_power
          - entity: update.shelly_hinterhof_firmware
          - entity: button.shelly_hinterhof_reboot
          - type: divider
          - light.shelly_garagentor
          - entity: sensor.shelly_garagentor_energy
          - entity: sensor.shelly_garagentor_power
          - entity: update.shelly_garagentor_firmware
          - entity: button.shelly_garagentor_reboot
          - type: divider
          - light.shelly_gartentor
          - entity: sensor.shelly_gartentor_energy
          - entity: sensor.shelly_gartentor_power
          - entity: update.shelly_gartentor_firmware
          - entity: button.shelly_gartentor_reboot

  - title: Shelly 2
    path: shelly2
    panel: false
    cards:
      - type: entities
        title: Erdgeschoss
        show_header_toggle: false
        entities:
          - switch.shelly_kitchen_coffeemaker
          - entity: sensor.shelly_kitchen_coffeemaker_energy
          - entity: sensor.shelly_kitchen_coffeemaker_power
          - entity: update.shelly_kitchen_coffeemaker_firmware
          - entity: button.shelly_kitchen_coffeemaker_reboot
          - type: divider
          - switch.shelly_kitchen_icemaker
          - entity: sensor.shelly_kitchen_icemaker_energy
          - entity: sensor.shelly_kitchen_icemaker_power
          - entity: update.shelly_kitchen_icemaker_firmware
          - entity: button.shelly_kitchen_icemaker_reboot
          - type: divider
          - switch.shelly_utilityroom_boiler
          - entity: sensor.shelly_utilityroom_boiler_energy
          - entity: sensor.shelly_utilityroom_boiler_power
          - entity: update.shelly_utilityroom_boiler_firmware
          - entity: button.shelly_utilityroom_boiler_reboot
          - type: divider
          - switch.shelly_utilityroom_biocat
          - entity: sensor.shelly_utilityroom_biocat_energy
          - entity: sensor.shelly_utilityroom_biocat_power
          - entity: update.shelly_utilityroom_biocat_firmware
          - entity: button.shelly_utilityroom_biocat_reboot
          - type: divider
          - light.shelly_corridor_studypillar
          - entity: sensor.shelly_corridor_studypillar_energy
          - entity: sensor.shelly_corridor_studypillar_power
          - entity: update.shelly_corridor_studypillar_firmware
          - entity: button.shelly_corridor_studypillar_reboot
          - type: divider
          - light.shelly_dining_xmastree
          - entity: sensor.shelly_dining_xmastree_energy
          - entity: sensor.shelly_dining_xmastree_power
          - entity: update.shelly_dining_xmastree_firmware
          - entity: button.shelly_dining_xmastree_reboot
          - type: divider
          - light.shelly_lounge_schwibbogen1
          - entity: sensor.shelly_lounge_schwibbogen1_energy
          - entity: sensor.shelly_lounge_schwibbogen1_power
          - entity: update.shelly_lounge_schwibbogen1_firmware
          - entity: button.shelly_lounge_schwibbogen1_reboot
          - type: divider
          - light.shelly_lounge_schwibbogen2
          - entity: sensor.shelly_lounge_schwibbogen2_energy
          - entity: sensor.shelly_lounge_schwibbogen2_power
          - entity: update.shelly_lounge_schwibbogen2_firmware
          - entity: button.shelly_lounge_schwibbogen2_reboot
          - type: divider
          - light.shelly_lounge_blackbowl
          - entity: sensor.shelly_lounge_blackbowl_energy
          - entity: sensor.shelly_lounge_blackbowl_power
          - entity: update.shelly_lounge_blackbowl_firmware
          - entity: button.shelly_lounge_blackbowl_reboot
          - type: divider
          - light.shelly_lounge_readinglamp
          - entity: sensor.shelly_lounge_readinglamp_energy
          - entity: sensor.shelly_lounge_readinglamp_power
          - entity: update.shelly_lounge_readinglamp_firmware
          - entity: button.shelly_lounge_readinglamp_reboot
          - type: divider
          - light.shelly_lounge_whiteball
          - entity: sensor.shelly_lounge_whiteball_energy
          - entity: sensor.shelly_lounge_whiteball_power
          - entity: update.shelly_lounge_whiteball_firmware
          - entity: button.shelly_lounge_whiteball_reboot
          - type: divider
          - light.shelly_kitchen_longstrip
          - entity: sensor.shelly_kitchen_longstrip_energy
          - entity: sensor.shelly_kitchen_longstrip_power
          - entity: update.shelly_kitchen_longstrip_firmware
          - entity: button.shelly_kitchen_longstrip_reboot
          - type: divider
          - light.shelly_kitchen_shortstrip
          - entity: sensor.shelly_kitchen_shortstrip_energy
          - entity: sensor.shelly_kitchen_shortstrip_power
          - entity: update.shelly_kitchen_shortstrip_firmware
          - entity: button.shelly_kitchen_shortstrip_reboot
          - type: divider
          - switch.shelly_utilityroom_circulatingpump
          - entity: sensor.shelly_utilityroom_circulatingpump_energy
          - entity: sensor.shelly_utilityroom_circulatingpump_power
          - entity: update.shelly_utilityroom_circulatingpump_firmware
          - entity: button.shelly_utilityroom_circulatingpump_reboot
      - type: entities
        title: Obergeschoss
        show_header_toggle: false
        entities:
          - switch.shelly_xtool_m1ultra
          - entity: sensor.shelly_xtool_m1ultra_energy
          - entity: sensor.shelly_xtool_m1ultra_power
          - entity: update.shelly_xtool_m1ultra_firmware
          - entity: button.shelly_xtool_m1ultra_reboot
          - type: divider
          - switch.shelly_xtool_safetypro
          - entity: sensor.shelly_xtool_safetypro_energy
          - entity: sensor.shelly_xtool_safetypro_power
          - entity: update.shelly_xtool_safetypro_firmware
          - entity: button.shelly_xtool_safetypro_reboot
          - type: divider
          - switch.shelly_bambulab_x1c
          - entity: sensor.shelly_bambulab_x1c_energy
          - entity: sensor.shelly_bambulab_x1c_power
          - entity: update.shelly_bambulab_x1c_firmware
          - entity: button.shelly_bambulab_x1c_reboot
          - type: divider
      - type: entities
        title: Außenbereich
        show_header_toggle: false
        entities:
          - light.shelly_entrance_star
          - entity: sensor.shelly_entrance_star_energy
          - entity: sensor.shelly_entrance_star_power
          - entity: update.shelly_entrance_star_firmware
          - entity: button.shelly_entrance_star_reboot
          - type: divider
          - light.shelly_entrance_drops
          - entity: sensor.shelly_entrance_drops_energy
          - entity: sensor.shelly_entrance_drops_power
          - entity: update.shelly_entrance_drops_firmware
          - entity: button.shelly_entrance_drops_reboot
          - type: divider
          - light.shelly_entrance_lightbirch
          - entity: sensor.shelly_entrance_lightbirch_energy
          - entity: sensor.shelly_entrance_lightbirch_power
          - entity: update.shelly_entrance_lightbirch_firmware
          - entity: button.shelly_entrance_lightbirch_reboot

  - title: Nuki
    path: nuki
    panel: false
    badges:
      - type: custom:mushroom-template-badge
        entity: group.batteries_nuki
        content: Batterien
        icon: "{{ 'mdi:battery-check' if is_state ( entity, 'off' ) else 'mdi:battery-alert' }}"
        color: "{{ 'limegreen' if is_state ( entity, 'off' ) else 'red' }}"
        tap_action:
            action: more-info
    cards:
      - type: entities
        title: Türschlösser
        show_header_toggle: false
        entities:
          - lock.eingangstur
          - sensor.eingangstur_battery
          - binary_sensor.eingangstur_battery_charging
          - binary_sensor.eingangstur_battery_critical
          - sensor.eingangstur_firmware_version
          - binary_sensor.eingangstur_keypad_battery_critical
          - type: divider
          - lock.nebentur
          - sensor.nebentur_batterie
          - binary_sensor.nebentur_batteriestand
          - type: divider
          - lock.garagentur
          - sensor.garagentur_batterie
          - binary_sensor.garagentur_batteriestand

  - title: Gardena
    path: gardena
    panel: false
    badges:
      - type: custom:mushroom-template-badge
        entity: group.batteries_gardena
        content: Batterien
        icon: "{{ 'mdi:battery-check' if is_state ( entity, 'off' ) else 'mdi:battery-alert' }}"
        color: "{{ 'limegreen' if is_state ( entity, 'off' ) else 'red' }}"
        tap_action:
            action: more-info
    cards:
      - type: entities
        title: Sensoren
        show_header_toggle: false
        entities:
          - sensor.hochbeet_vorne_battery_level
          - sensor.hochbeet_vorne_soil_humidity
          - sensor.hochbeet_vorne_soil_temperature
          - type: divider
          - sensor.hochbeet_hinten_battery_level
          - sensor.hochbeet_hinten_soil_humidity
          - sensor.hochbeet_hinten_soil_temperature
          - type: divider
          - sensor.gemusebeet_vorne_battery_level
          - sensor.gemusebeet_vorne_soil_humidity
          - sensor.gemusebeet_vorne_soil_temperature
          - type: divider
          - sensor.gemusebeet_hinten_battery_level
          - sensor.gemusebeet_hinten_soil_humidity
          - sensor.gemusebeet_hinten_soil_temperature

  - title: IKEA
    path: ikea
    panel: false
    badges:
      - type: custom:mushroom-template-badge
        entity: group.batteries_ikea
        content: Batterien
        icon: "{{ 'mdi:battery-check' if is_state ( entity, 'off' ) else 'mdi:battery-alert' }}"
        color: "{{ 'limegreen' if is_state ( entity, 'off' ) else 'red' }}"
        tap_action:
            action: more-info
    cards:
      - type: entities
        title: Sensoren
        show_header_toggle: false
        entities:
          - sensor.fernbedienung_bad
          - sensor.fernbedienung_dusche