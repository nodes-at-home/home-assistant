###
### junand 23.09.2016
###

# -------------------------------------------------------------------------------

homeassistant:

  # Name of the location where Home Assistant is running
  name: Home

  # Location required to calculate the time the sun rises and sets
  latitude: !secret my_latitude
  longitude: !secret my_longitude

  # Impacts weather/sunrise data
  elevation: 59

  # metric for Metric, imperial for Imperial
  unit_system: metric

  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: Europe/Berlin

  customize: !include conf/customize.yaml

system_health:

# -------------------------------------------------------------------------------
# logger

logger:
  # default: debug
  # default: info
  default: warn
  logs:
    homeassistant.components.automation: debug
    # boschshcpy: debug

# -------------------------------------------------------------------------------
# mqtt broker

mqtt:
  broker: mosquitto
  port: 1883
  client_id: home_assistant
  keepalive: 120
  protocol: 3.1.1

# -------------------------------------------------------------------------------
# influxdb
# https://home-assistant.io/blog/2015/12/07/influxdb-and-grafana/

influxdb:
  api_version: 2
  ssl: false
  host: influxdb
  port: 8086
  token: !secret influxdb_token
  organization: !secret influxdb_organization
  bucket: home_assistant
  include:
    entities:
        - sensor.dht22_terrace_temperature
        - sensor.dht22_roof_temperature
        - sensor.dht22_lounge_temperature
        - sensor.relay_garage_temperature
        - sensor.dht22_office_temperature
        - sensor.dht22_terrace_humidity
        - sensor.dht22_roof_humidity
        - sensor.dht22_lounge_humidity
        - sensor.relay_garage_humidity
        - sensor.dht22_office_humidity
        - sensor.DHT22_lounge_pressure
        - sensor.ds18b20_pool_temperature
        - sensor.ds18b20_pool_voltage
        - sensor.soil_garden_temperature1
        - sensor.soil_garden_temperature2
        - sensor.soil_garden_temperature3
        - sensor.soil_garden_moisture1
        - sensor.soil_garden_moisture2
        - sensor.soil_garden_moisture3
        - sensor.rain_garden_precipitation
        - sensor.daily_rain
  ignore_attributes:
    - friendly_name
    - icon

# -------------------------------------------------------------------------------
# weather platform for lovelace card

# weather:
  # - platform: openweathermap
    # api_key: !secret api_key_openweather

# -------------------------------------------------------------------------------
# media player

media_player:
  - platform: braviatv
    host: 192.168.2.116

# -------------------------------------------------------------------------------
# tracker

device_tracker:

  - platform: fritz
    host: 192.168.2.1
    consider_home: 180
    interval_seconds: 60
    track_new_devices: false

  # - platform: owntracks
    # max_gps_accuracy: 1500
    # waypoints: False

#------------------------------------------------------------------------------
# speedtest
speedtestdotnet:
  scan_interval:
    minutes: 30
  monitored_conditions:
    - ping
    - download
    - upload

# -------------------------------------------------------------------------------
# define all zones explicite and manual
# pictures from https://materialdesignicons.com/

zone: !include conf/zone.yaml

# -------------------------------------------------------------------------------
# Show links to resources in log and frontend
###introduction:

# -------------------------------------------------------------------------------
# Enables the frontend
frontend:

lovelace:
    mode: yaml
    resources:
      # https://github.com/custom-cards/vertical-stack-in-card
      - url: /local/vertical-stack-in-card.js
        type: js

# -------------------------------------------------------------------------------
http:
  # Uncomment this to add a password (recommended!)
  # api_password: PASSWORD

# -------------------------------------------------------------------------------
# Checks for available updates
updater:

# -------------------------------------------------------------------------------
# Discover some devices automatically
###discovery:

# -------------------------------------------------------------------------------
# Allows you to issue voice commands from the frontend in enabled browsers
###conversation:

# -------------------------------------------------------------------------------
# Enables the recorder component.
recorder:
    auto_purge: on
    purge_keep_days: 30

# -------------------------------------------------------------------------------
# Enables support for tracking state changes over time.
history:
    include:
        domains:
            - sensor
            - light
            - switch
            - cover
            - media_player
            - device_tracker
        # entities:

# -------------------------------------------------------------------------------
# Enables support for logbook component.
logbook:
    include:
        domains:
            - sensor
            - light
            - switch
            - cover
            - media_player
            - device_tracker
        # entities:
        
# -------------------------------------------------------------------------------
# hostname
input_text:
  hostname:
    initial: !env_var PARENT_HOSTNAME

# -------------------------------------------------------------------------------
# daily aggregate
utility_meter:
  daily_rain:
    source: sensor.rain_garden_precipitation
    cycle: daily

# -------------------------------------------------------------------------------
# roborock s6
# vacuum:
  # - platform: xiaomi_miio
    # name: "Roborock S6 ground floor"
    # host: 192.168.2.129
    # token: !secret token_vacuum_ground_floor
  # - platform: xiaomi_miio
    # name: "Roborock S6 first floor"
    # host: 192.168.2.151
    # token: !secret token_vacuum_first_floor

# -------------------------------------------------------------------------------
# Bosch Smart Home
# https://github.com/tschamm/boschshc-hass
bosch_shc:
   ip_address: '192.168.2.155'
   ssl_certificate: '/config/custom_components/bsh-client-cert.pem'
   ssl_key: '/config/custom_components/bsh-client-key.pem'
   name: 'SHC-Controller'

# -------------------------------------------------------------------------------
# Track the sun
sun:

# -------------------------------------------------------------------------------
#
sensor:         !include_dir_merge_list     conf/sensor
binary_sensor:  !include_dir_merge_list     conf/binary_sensor
light:          !include_dir_merge_list     conf/light
switch:         !include_dir_merge_list     conf/switch
cover:          !include_dir_merge_list     conf/cover
group:          !include_dir_named          conf/group
input_boolean:  !include_dir_merge_named    conf/input_boolean
input_number:   !include_dir_named          conf/input_number
input_select:   !include_dir_named          conf/input_select
input_datetime: !include_dir_named          conf/input_datetime
scene:          !include                    conf/scene.yaml
automation:     !include_dir_merge_list     conf/automation

# -------------------------------------------------------------------------------
