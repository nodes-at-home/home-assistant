###
### 22.08.2019 split up
###

  - alias: pitouch_screen_on
    hide_entity: False
    trigger:
      - platform: time
        at: '05:30:00'
      - platform: time
        at: '08:00:00'
      - platform: state
        entity_id: group.family_devices
        to: 'home'
    condition:
      - condition: and
        conditions:
          - condition: state
            entity_id: group.family_devices
            state: 'home'
          - condition: or
            conditions:
              - condition: and
                conditions:
                  - condition: state
                    entity_id: binary_sensor.workday_sensor
                    state: 'on'
                  - condition: time
                    after: '05:30:00'
                    before: '22:00:00'
              - condition: and
                conditions:
                  - condition: state
                    entity_id: binary_sensor.workday_sensor
                    state: 'off'
                  - condition: time
                    after: '08:00:00'
                    before: '22:00:00'
    action:
      - service: light.turn_on
        entity_id:
            - light.pitouch_corridor_screen

  - alias: pitouch_screen_off
    hide_entity: False
    trigger:
      - platform: time
        at: '00:01:00'
      - platform: state
        entity_id: group.family_devices
        to: 'not_home'
    action:
      - service: light.turn_off
        entity_id:
            - light.pitouch_corridor_screen

  - alias: pitouch_screen_off_after_tv_off
    hide_entity: False
    trigger:
        platform: state
        entity_id: media_player.sony_bravia_tv
        from: "on"
        to: "off"
        for:
            minutes: 1
    condition:
      - condition: time
        after: '21:00:00'
        before: '06:00:00'
    action:
      - delay: 00:15:00
      - service: light.turn_off
        entity_id:
            - light.pitouch_corridor_screen
